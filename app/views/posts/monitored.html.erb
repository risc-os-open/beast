<% @page_title = "Posts that #{h @user.display_name} is monitoring" %>

<% content_for :right do %>
  <h4><%= link_to(@user.display_name, user_path(@user)) %>'s Monitored Topics</h4>

  <ul class="flat">
    <% @user.monitored_topics.limit(25).each do |topic| %>
      <li><%= link_to(topic.title, forum_topic_path(forum_id: topic.forum_id, id: topic.id)) %></li>
    <% end %>
  </ul>
<% end %>

<div class="simple_flex_row with_moderation_info space_between">
  <%= pagy_nav(@pagy).html_safe() %>
  <%= render partial: 'shared/ask_a_moderator' %>
</div>

<%=
  render(
    partial: 'shared/posts',
    locals:  {
      posts:       @posts,
      pagy:        @pagy,
      embed_topic: true
    }
  )
%>

<div class="simple_flex_row becomes_column_if_narrow space_between">
  <%= pagy_nav(@pagy).html_safe() %>

  <p class="rss">
    <%= feed_icon_tag(@page_title, monitored_posts_path(user_id: @user, format: :rss)) %>
    <%= pluralize(@pagy.count, 'post') %> found
  </p>
</div>
